{% sw_extends '@Storefront/storefront/layout/meta.html.twig' %}

{% block layout_head_meta_tags_general %}
    {{ parent() }}

    {% if page.extensions.easycredit.apiKey %}
    <meta name="easycredit-api-key" content="{{page.extensions.easycredit.apiKey}}" />
    {% endif %}

    {% if page.extensions.easycredit.widgetSelector %}
    <meta name="easycredit-widget-selector" content="{{page.extensions.easycredit.widgetSelector}}" />
    {% endif %}

    {% if page.extensions.easycredit.amount %}
    <meta name="easycredit-amount" content="{{page.extensions.easycredit.amount}}" />
    {% endif %}

    {% if page.extensions.easycredit.modal %}
    {% set modalMediaCollection = searchMedia([page.extensions.easycredit.modalSettingsMedia], context.context) %}
    {% set modalMedia = modalMediaCollection.get(page.extensions.easycredit.modalSettingsMedia) %}
    <easycredit-box-modal is-open="{{page.extensions.easycredit.modalIsOpen}}" snooze-for="{{page.extensions.easycredit.modalSettingsSnoozeFor}}" delay="{{page.extensions.easycredit.modalSettingsDelay}}" src="{{ modalMedia.url }}"></easycredit-box-modal>
    {% endif %}

    {% if page.extensions.easycredit.flashbox %}
    {% set flashboxMediaCollection = searchMedia([page.extensions.easycredit.flashboxSettingsMedia], context.context) %}
    {% set flashboxMedia = flashboxMediaCollection.get(page.extensions.easycredit.flashboxSettingsMedia) %}
    <easycredit-box-flash is-open="false" src="{{ flashboxMedia.url }}"></easycredit-box-flash>
    {% endif %}

    {% if page.extensions.easycredit.bar %}
    <easycredit-box-top></easycredit-box-top>
    {% endif %}

    <script type="module" src="https://ratenkauf.easycredit.de/api/resource/webcomponents/v3/easycredit-components/easycredit-components.esm.js"></script>
    <script nomodule src="https://ratenkauf.easycredit.de/api/resource/webcomponents/v3/easycredit-components/easycredit-components.js"></script>

{% endblock %}
